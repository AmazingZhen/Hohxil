# 游戏逻辑

标签（空格分隔）： 逻辑

---
###总体逻辑
进入地图选择模式-->选择特定地图-->进入特定地图-->具体地图游戏逻辑 (Map)

###具体地图游戏逻辑
以草原生态系统为例：
1、初始给定草原一定数量的生物，即草和羊(Model/Creatures)，这些单体的草和羊为了统计的方便，用一个集合，或者说数组进行统一的管理，这就是草聚类和羊聚类(Model/CreaturesAggregations)。一个生态系统包含一个食物链，生物间的各种相互作用是在这个食物链中进行实现的，因此，食物链，即FoodChain类(Model/Ecosystem)，包含了生物的聚类。
2、随着生物的发展，生物间不断发生着相互作用。下面以草、羊、狼来来进行讲解。
草是生产者，被羊捕食
羊是消费者，被狼捕食
狼是处于食物链顶端的消费者
一个简单的情景是：草生长，同时被捕食，因此要在一定时间对其进行结算，具体的数据是按照模拟出来的，由此可见，草有被吃光的潜在性。同理，羊，一方面吃草维持自己的生存，同时被狼捕食。而狼呢，同样需要捕食。这三者的相互作用其实是在FoodChain(Model/Ecosystem)中实现的(具体的细节请参阅相应的代码，有注释)。而生物的生老病死，即相应的结算，也是在FoodChain中实现的，并且通过类属性CreaturesAggregations关联到Creatures，从而调用模型基层的数据与类方法。
3、游戏中时间的计算与模型更新：总的时间控制器是在GameSchedule中控制的，FoodChain类中有自己的模型更新时间，但是与主控制器相关，成倍数关系，代表了一个特定的生态系统的更新时间。仍以草、羊、狼为例，当到达特定的更新时间时，实际上的实现是遍历一遍FoodChain中的类属性list(CreatureAggregations)，然后按照list中的顺序进行更新
4、生物定时器：游戏中出现的每种生物都有他自己的定时器，以此来控制生物的消失和出现。对于生产者来说，只考虑自身的生长率与死亡率(包含被捕食)。而对于消费者，则麻烦一些。游戏中是以“血量”这个标准来进行控制的，每个生物都有自己的血量，且随着时间血量逐渐减少，当环境恶劣时，比如进食不足，血量就会下降的较标准更快，从而实现生物的加速死亡等。计时器为零，生物死亡，且要从地图中消失
5、游戏结果：Judger类来控制游戏的成败与否。当生态圈稳定时，Judge类会判断出来，其实是根据我们设定的一个算法进行判断的。生态圈不稳定或者灭亡都有相应的判断机制。





